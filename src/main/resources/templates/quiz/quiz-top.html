<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<link rel="stylesheet" href="/css/quiz-top.css">
<head>
    <meta charset="UTF-8">
    <title>トップ</title>
</head>
<body>
<div class="main-container">
    <div class="header">
        <div class="welcome-section">
            <div class="user-info">
                <div class="welcome-text">ようこそ、歴史の道場へ</div>
                <div class="user-name" id="userName"><span th:text="${user.username}"></span></div>
            </div>
            <div class="user-stats">
                <div class="stat-item">
                    <span class="stat-label">総得点</span>
                    <span th:text="${user.totalScore}" class="stat-number"></span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">最高得点</span>
                    <span th:text="${user.bestScore}" class="stat-number"></span>
                </div>
            </div>
            <div class="buttons">
                <div class="logout">
                    <form th:action="@{/logout}" method="post">
                        <button type="submit" class="logout-btn">
                            退出
                        </button>
                    </form>
                </div>
                <div class="titles">
                    <a th:href="@{/title}" class="title">
                        称号一覧
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="menu-grid">

        <div class="menu-card primary">
            <a onclick="startQuiz()">
                <div class="menu-icon"><img src="/img/game.png" alt="game"></div>
                <div class="menu-title">歴史を学ぶ</div>
                <div class="menu-description">
                    歴史の出来事を年代順に並べよう！<br>
                    制限時間は100秒！
                    早く解けば得点が上がるよ！
                </div>
            </a>
        </div>

        <div class="menu-card">
            <a th:href="@{/rank/ranking}">
                <div class="menu-icon"><img src="/img/rank.png" alt="rank"></div>
                <div class="menu-title">ランキング</div>
                <div class="menu-description">
                    上位10人が出るよ<br>
                    自分の名前はあるかな？
                </div>
            </a>
        </div>

        <div class="menu-card">
            <a th:href="@{/quiz/history}">
                <div class="menu-icon"><img src="/img/list.png" alt="list"></div>
                <div class="menu-title">出来事一覧</div>
                <div class="menu-description">
                    クイズの問題の一覧が見れるよ<br>
                    忘れた出来事を復習しよう！
                </div>
            </a>
        </div>

        <div class="menu-card">
            <a th:href="@{/score/history}">
                <div class="menu-icon"><img src="/img/history.png" alt="history"></div>
                <div class="menu-title">戦歴録</div>
                <div class="menu-description">
                    これまでの自分の記録が見れるよ<br>
                    過去の自分を振り返ろう！
                </div>
            </a>
        </div>
    </div>
</div>

<script>
    // クイズ開始
    function startQuiz() {
        showTransition('いざ、出陣！！', () => {
            window.location.href = '/quiz/game';
        });
    }

    // 画面遷移エフェクト
    function showTransition(message, callback) {
        // 簡単な遷移エフェクト
        const overlay = document.createElement('div');
        overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(45deg, rgba(139, 69, 19, 0.9), rgba(44, 24, 16, 0.9));
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                opacity: 0;
                transition: opacity 0.5s ease;
                color: #fff;
                font-size: 24px;
                font-weight: 700;
                letter-spacing: 2px;
            `;
        overlay.textContent = message;

        document.body.appendChild(overlay);

        // フェードイン
        setTimeout(() => {
            overlay.style.opacity = '1';
        }, 10);

        // 1.5秒後にコールバック実行とオーバーレイ削除
        setTimeout(() => {
            callback();
            document.body.removeChild(overlay);
        }, 1500);
    }
</script>
</body>
</html>